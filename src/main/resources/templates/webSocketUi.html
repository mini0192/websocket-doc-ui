<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>WebSocket UI</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Fira+Code&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/websocketUi.css">
</head>
<body>

<div class="container">
    <div class="header">
        <h1>WebSocket UI</h1>
    </div>

    <div class="tabs">
        <button class="tab-button active" onclick="openTab('documentation')">Documentation</button>
        <button class="tab-button" onclick="openTab('test-client')">Test Client</button>
    </div>

    <!-- Documentation Tab -->
    <div id="documentation" class="tab-content active">
        <!-- Topic Group -->
        <div th:each="groupEntry : ${groupedDocs}" class="group">
            <details open>
                <summary class="group-name" th:text="${groupEntry.key}">Group Name</summary>

                <!-- Topic Data -->
                <div th:each="doc : ${groupEntry.value}" class="card">
                    <div class="card-content">
                        <div class="topic">
                            <span class="topic-text" th:text="${doc.topic}">Topic</span>
                            <button class="topic-copy-button">Copy</button>
                        </div>
                        <div class="description" th:text="${doc.description}">Description</div>
                    </div>

                    <!-- Payload Data -->
                    <details>
                        <summary>View Payload</summary>
                        <div class="payload-container">
                            <pre class="payload-content" th:text="${doc.payload}">Payload JSON</pre>
                            <button class="copy-button">Copy</button>
                        </div>
                    </details>
                </div>
            </details>
        </div>
    </div>

    <!-- Test Client Tab -->
    <div id="test-client" class="tab-content">
        <div class="test-client-container">
            <div class="control-section">
                <label for="endpoint">WebSocket Endpoint:</label>
                <input type="text" id="endpoint" value="http://localhost:8080/websocket">
                <div class="button-group">
                    <button id="connectBtn">Connect</button>
                    <button id="disconnectBtn" disabled>Disconnect</button>
                </div>
            </div>

            <!-- Subscribe Section -->
            <div class="message-section">
                <label for="subscribe-topic">Subscribe Topic:</label>
                <input type="text" id="subscribe-topic" placeholder="/topic/greetings">
                <div class="button-group">
                    <button id="subscribe" disabled>Subscribe</button>
                    <button id="unsubscribe" disabled>Unsubscribe</button>
                </div>
            </div>

            <!-- Message Block for Send Message -->
            <div class="message-section">
                <label for="send-app">Send To:</label>
                <input type="text" id="send-app" placeholder="/app/hello">
                <label for="name">Message Content:</label>
                <textarea id="name" placeholder="Enter message to send..."></textarea>
                <div class="button-group">
                    <button id="sendBtn" disabled>Send</button>
                </div>
            </div>

            <!-- Message Block for Logs -->
            <div class="message-section">
                <label for="messages">Log</label>
                <div id="messages"></div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>
<script src="/js/websocketUi.js"></script>
<script src="/js/websocketTestUi.js"></script>

</body>
</html>